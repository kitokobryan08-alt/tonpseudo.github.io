<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Architext - Dashboard Utilisateur</title>
<style>
  body { font-family: sans-serif; background: linear-gradient(135deg, #1e3c72, #2a5298); color: #fff; margin:0; padding:20px; }
  .btn { background:#fff; color:#2a5298; padding:10px 20px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }
  input, textarea { width:100%; padding:10px; margin:10px 0; border-radius:5px; border:none; }
  .project { background:#fff; color:#333; margin:10px 0; padding:15px; border-radius:8px; }
  .project img { max-width:100%; border-radius:5px; }
</style>
</head>
<body>

<h1>Dashboard Utilisateur</h1>

<div id="auth-section">
  <button id="logoutBtn" class="btn" style="display:none;">Se déconnecter</button>
</div>

<div id="user-section" style="display:none;">
  <h2>Créer un nouveau projet</h2>
  <form id="projectForm">
    <textarea id="desc" placeholder="Description du projet" required></textarea>
 const authSection = document.getElementById('auth-section');
  const userSection = document.getElementById('user-section');
  const projectsList = document.getElementById('projectsList');
  const projectForm = document.getElementById('projectForm');
  const descInput = document.getElementById('desc');
  const imageInput = document.getElementById('imageInput');

  logoutBtn.addEventListener('click', () => {
    signOut(auth);
  });

  // Gérer l'état de connexion
  onAuthStateChanged(auth, async user => {
    if (user) {
      logoutBtn.style.display = 'inline-block';
      userSection.style.display = 'block';
      afficherProjets(user.uid);
    } else {
      logoutBtn.style.display = 'none';
      userSection.style.display = 'none';
      projectsList.innerHTML = '';
      // Tu peux rediriger vers la page login si tu veux ici
    }
  });

  projectForm.addEventListener('submit', async e => {
    e.preventDefault();
    const desc = descInput.value.trim();
    if (!desc) {
      alert('Merci de mettre une description');
      return;
    }

    const user = auth.currentUser;
    if (!user) return alert('Vous devez être connecté');

    let imageUrl = '';
    if (imageInput.files.length > 0) {
      const file = imageInput.files[0];
 <input type="file" id="imageInput" accept="image/*" />
    <button type="submit" class="btn">Créer projet</button>
  </form>

  <h2>Mes projets</h2>
  <div id="projectsList"></div>
</div>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
  import { getFirestore, collection, addDoc, query, where, getDocs, orderBy } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB_25LK7m2SXg4xAyaMXV18uU4b5-JPEHw",
    authDomain: "architext-9efb6.firebaseapp.com",
    projectId: "architext-9efb6",
    storageBucket: "architext-9efb6.appspot.com",
    messagingSenderId: "70580255187",
    appId: "1:70580255187:web:ee3591d6d3c2f52b491726"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  const logoutBtn = document.getElementById('logoutBtn');
 const storageRef = ref(storage, `projects/user.uid/{Date.now()}_file.name`);
      await uploadBytes(storageRef, file);
      imageUrl = await getDownloadURL(storageRef);
    

    try 
      await addDoc(collection(db, "projects"), 
        userId: user.uid,
        description: desc,
        imageUrl: imageUrl,
        createdAt: new Date()
      );
      descInput.value = ”;
      imageInput.value = ”;
      afficherProjets(user.uid);
     catch (error) 
      console.error("Erreur lors de l'ajout du projet:", error);
      alert("Erreur lors de la création du projet");
    );

  async function afficherProjets(uid) 
    projectsList.innerHTML = 'Chargement...';
    const q = query(collection(db, "projects"), where("userId", "==", uid), orderBy("createdAt", "desc"));
    const querySnapshot = await getDocs(q);
    if (querySnapshot.empty) 
      projectsList.innerHTML = '<p>Vous návez aucun projet.</p>';
      return;
    
    projectsList.innerHTML = ”;
    querySnapshot.forEach(doc => 
      const data = doc.data();
      const div = document.createElement('div');
      div.className = 'project';
      div.innerHTML = `<p>{data.description}</p>` + (data.imageUrl ? `<img src="${data.imageUrl}" alt="Image projet" />` : '');
      projectsList.appendChild(div);
    });
  }
[25/08 à 00:37] ChatGPT: </script>

</body>
</html>
